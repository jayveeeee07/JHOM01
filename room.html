<!doctype html>
<html>
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Rooms — JHOM</title>
  <link rel="stylesheet" href="index.css">
  <script src="app-config.js"></script>
</head>
<body>
  <header class="header"><div class="brand"><img src="logo.jpg"> Rooms</div><nav><a class="btn btn-outline" href="home.html">Home</a><a class="btn btn-outline" href="cart.html">Cart</a></nav></header>
  <main class="container"><section class="card"><h2>Available Rooms</h2><p class="kv">Click Book Now to reserve seamless.</p></section><section id="roomList" class="grid"></section></main>
  <footer class="footer">© 2025 JHOM</footer>

  <script>
    function lsget(k){return JSON.parse(localStorage.getItem(k)||'null')}
    function lsset(k,v){localStorage.setItem(k,JSON.stringify(v))}
    async function loadRooms(){
      const container = document.getElementById('roomList');
      try {
        const res = await fetch(BACKEND_URL + '/rooms');
        const rooms = await res.json();
        if(!rooms.length){ container.innerHTML = '<div class="card">No rooms</div>'; return; }
        container.innerHTML = rooms.map(r=>`
          <div class="card">
            <img src="${r.image||'placeholder1.jpg'}"><strong>${r.name||'Room '+r.roomNumber}</strong>
            <div class="kv">Room #: ${r.roomNumber||r.id}</div>
            <div class="kv">₱ ${Number(r.price||0).toLocaleString()}</div>
            <div style="margin-top:8px;display:flex;gap:8px"><button class="btn btn-outline" onclick='addToCart("${r.id}")'>Interested</button><button class="btn btn-primary" onclick='bookNow("${r.id}")'>Book Now</button></div>
          </div>
        `).join('');
      } catch (e) {
        container.innerHTML = '<div class="kv">Error loading rooms</div>';
      }
    }
    function addToCart(id){
      let cart = lsget('cart')||[];
      if(!cart.includes(id)) cart.push(id);
      lsset('cart', cart);
      alert('Added to cart');
    }
    function bookNow(id){
      localStorage.setItem('selectedRoomId', id);
      location.href = 'booking.html';
    }
    loadRooms();
  </script>
</body>
</html>
