<!doctype html>
<html>
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>JHOM — Home</title>
  <link rel="stylesheet" href="index.css">
  <script src="app-config.js"></script>
</head>
<body>
  <header class="header"><div class="brand"><img src="logo.jpg"> JHOM</div><nav><a class="btn btn-outline" href="room.html">Rooms</a><a class="btn btn-outline" href="index.html">Account</a></nav></header>
  <main class="container">
    <section class="card"><h2>Welcome to Jayvee Hall of Mansion</h2><p class="kv">Book rooms seamlessly. Backend at: <code id="apiUrl"></code></p></section>
    <section class="card"><h3>Rooms Preview</h3><div id="previewGrid" class="grid"></div></section>
  </main>
  <footer class="footer">© 2025 JHOM</footer>

  <script>
    document.getElementById('apiUrl').textContent = BACKEND_URL;
    async function loadRooms(){
      try {
        const res = await fetch(BACKEND_URL + '/rooms');
        const rooms = await res.json();
        const grid = document.getElementById('previewGrid');
        grid.innerHTML = rooms.slice(0,4).map(r=>`
          <div class="card"><img src="${r.image||'placeholder1.jpg'}"><strong>${r.name||'Room '+r.roomNumber}</strong><div class="kv">₱ ${Number(r.price||0).toLocaleString()}</div></div>
        `).join('');
      } catch (e) {
        document.getElementById('previewGrid').innerHTML = '<div class="kv">Error loading rooms</div>';
      }
    }
    loadRooms();
  </script>
</body>
</html>
